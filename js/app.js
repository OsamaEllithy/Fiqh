const data = {
"شرب الخمر": { حكم: "حرام", دليل: "قال تعالى: {إِنَّمَا الْخَمْرُ وَالْمَيْسِرُ...} [المائدة: 90]" },
"الصلاة": { حكم: "واجب", دليل: "قال تعالى: {إِنَّ الصَّلَاةَ كَانَتْ عَلَى الْمُؤْمِنِينَ كِتَابًا مَّوْقُوتًا}" },
"صيام رمضان": { حكم: "واجب", دليل: "قال تعالى: {يَا أَيُّهَا الَّذِينَ آمَنُوا كُتِبَ عَلَيْكُمُ الصِّيَامُ...}" },
"الربا": { حكم: "حرام", دليل: "قال تعالى: {يَا أَيُّهَا الَّذِينَ آمَنُوا لَا تَأْكُلُوا الرِّبَا...}" },
"الزكاة": { حكم: "واجب", دليل: "قال تعالى: {وَأَقِيمُوا الصَّلَاةَ وَآتُوا الزَّكَاةَ}" },
"حجاب المرأة": { حكم: "واجب", دليل: "قال تعالى: {وَقُل لِّلْمُؤْمِنَاتِ يَغْضُضْنَ مِنْ أَبْصَارِهِنَّ...}" },
"الكذب": { حكم: "حرام", دليل: "قال النبي ﷺ: إياكم والكذب، فإن الكذب يهدي إلى الفجور..." },
"الغيبة": { حكم: "حرام", دليل: "قال تعالى: {وَلَا يَغْتَب بَّعْضُكُم بَعْضًا...}" },
"السرقة": { حكم: "حرام", دليل: "قال تعالى: {وَالسَّارِقُ وَالسَّارِقَةُ فَاقْطَعُوا أَيْدِيَهُمَا...}" },
"بر الوالدين": { حكم: "واجب", دليل: "قال تعالى: {وَقَضَى رَبُّكَ أَلَّا تَعْبُدُوا إِلَّا إِيَّاهُ...}" },
"صوم الست من شوال": { حكم: "مستحب", دليل: "قال النبي ﷺ: من صام رمضان ثم أتبعه ستًا من شوال..." },
"صلاة الوتر": { حكم: "سنة مؤكدة", دليل: "قال النبي ﷺ: أوتروا يا أهل القرآن..." },
"صلاة التراويح": { حكم: "سنة", دليل: "قال النبي ﷺ: من قام رمضان إيمانًا واحتسابًا..." },
"التدخين": { حكم: "حرام", دليل: "لما فيه من ضرر على النفس، والقاعدة: لا ضرر ولا ضرار." },
"السحر": { حكم: "حرام", دليل: "قال تعالى: {وَلَقَدْ عَلِمُوا لَمَنِ اشْتَرَاهُ مَا لَهُ فِي الْآخِرَةِ مِنْ خَلَاقٍ}" },
"عقوق الوالدين": { حكم: "حرام", دليل: "قال تعالى: {فَلَا تَقُل لَّهُمَا أُفٍّ}، وقال النبي ﷺ: «إن من أكبر الكبائر: الإشراك بالله، وعقوق الوالدين...»" },
"الصلاة في وقتها": { حكم: "واجب", دليل: "سُئل النبي ﷺ: أي العمل أحب إلى الله؟ قال: «الصلاة على وقتها»" },
"الوضوء قبل النوم": { حكم: "سنة مستحبة", دليل: "قال النبي ﷺ: «إذا أتيت مضجعك فتوضأ وضوءك للصلاة»" },
"الصلاة على النبي": { حكم: "واجبة في التشهد الأخير وسنة في غيره", دليل: "قال تعالى: {إِنَّ اللَّهَ وَمَلَائِكَتَهُ يُصَلُّونَ عَلَى النَّبِيِّ...}" },
"صيام عاشوراء": { حكم: "سنة مؤكدة", دليل: "سُئل النبي ﷺ عن صوم يوم عاشوراء فقال: «يكفر السنة الماضية»" },
"صيام يوم عرفة": { حكم: "سنة مؤكدة", دليل: "سُئل النبي ﷺ عن صوم يوم عرفة فقال: «يكفر السنة الماضية والباقية»" },
"النميمة": { حكم: "حرام", دليل: "قال النبي ﷺ: «لا يدخل الجنة نمام»" },
"الوضوء": { حكم: "واجب", دليل: "قال تعالى: {يَا أَيُّهَا الَّذِينَ آمَنُوا إِذَا قُمْتُمْ إِلَى الصَّلَاةِ فَاغْسِلُوا وُجُوهَكُمْ...} [المائدة: 6]" },
"الجهر بالنية في الصلاة": { حكم: "بدعة", دليل: "قال النبي ﷺ: «إنما الأعمال بالنيات» ولم ينقل عنه الجهر بها." },
"أداء الأذان والإقامة": { حكم: "سنة مؤكدة", دليل: "قال النبي ﷺ: «إذا حضرت الصلاة فليؤذن لكم أحدكم وليؤمكم أكبركم» [رواه البخاري ومسلم]" },
"البيع والشراء": { حكم: "مباح (أصلًا)", دليل: "قال تعالى: {وَأَحَلَّ اللَّهُ الْبَيْعَ وَحَرَّمَ الرِّبَا} [البقرة: 275]" },
"الرشوة": { حكم: "حرام", دليل: "قال النبي ﷺ: «لعن الله الراشي والمرتشي» [رواه الترمذي وابن ماجه]" },
"الغش في الميزان": { حكم: "حرام", دليل: "قال تعالى: {وَيْلٌ لِّلْمُطَفِّفِينَ} [المطففين: 1]" },
"النظافة": { حكم: "واجبة (في بعض المواضع)", دليل: "قال النبي ﷺ: «الطهور شطر الإيمان» [رواه مسلم]" },
"السلام عند اللقاء": { حكم: "سنة", دليل: "قال النبي ﷺ: «أفشوا السلام بينكم» [رواه مسلم]" },
"الحج": { حكم: "واجب على المستطيع", دليل: "قال تعالى: {وَلِلَّهِ عَلَى النَّاسِ حِجُّ الْبَيْتِ مَنِ اسْتَطَاعَ إِلَيْهِ سَبِيلًا} [آل عمران: 97]" },
"العمرة": { حكم: "واجبة عند بعض العلماء وسنة مؤكدة عند آخرين", دليل: "قال النبي ﷺ: «العمرة إلى العمرة كفارة لما بينهما» [رواه البخاري ومسلم]" },
"الجهاد": { حكم: "فرض كفاية وقد يصير فرض عين", دليل: "قال تعالى: {كُتِبَ عَلَيْكُمُ الْقِتَالُ وَهُوَ كُرْهٌ لَّكُمْ} [البقرة: 216]" },
"العدل": { حكم: "واجب", دليل: "قال تعالى: {إِنَّ اللَّهَ يَأْمُرُ بِالْعَدْلِ وَالإِحْسَانِ} [النحل: 90]" },
"الوفاء بالعهد": { حكم: "واجب", دليل: "قال تعالى: {وَأَوْفُوا بِالْعَهْدِ إِنَّ الْعَهْدَ كَانَ مَسْؤُولًا} [الإسراء: 34]" },
"الأمانة": { حكم: "واجب", دليل: "قال تعالى: {إِنَّ اللَّهَ يَأْمُرُكُمْ أَنْ تُؤدُّوا الأَمَانَاتِ إِلَى أَهْلِهَا} [النساء: 58]" },
"قتل النفس": { حكم: "حرام", دليل: "قال تعالى: {وَلَا تَقْتُلُوا النَّفْسَ الَّتِي حَرَّمَ اللَّهُ إِلَّا بِالْحَقِّ} [الإسراء: 33]" },
"القصاص": { حكم: "واجب في القتل العمد إلا أن يعفو ولي الدم", دليل: "قال تعالى: {وَلَكُمْ فِي الْقِصَاصِ حَيَاةٌ} [البقرة: 179]" },
"الصدقة": { حكم: "مستحبة (واجبة في النذر)", دليل: "قال تعالى: {إِن تُقْرِضُوا اللَّهَ قَرْضًا حَسَنًا} [التغابن: 17]" },
"صلة الرحم": { حكم: "واجب", دليل: "قال النبي ﷺ: «من أحب أن يُبسط له في رزقه ويُنسأ له في أثره فليصل رحمه» [رواه البخاري]" },
"الإحسان إلى الجار": { حكم: "واجب", دليل: "قال النبي ﷺ: «ما زال جبريل يوصيني بالجار حتى ظننت أنه سيورثه» [رواه البخاري ومسلم]" },
"الأضحية": { حكم: "سنة مؤكدة", دليل: "قال النبي ﷺ: «ما عمل آدمي من عمل يوم النحر أحب إلى الله من إهراق الدم» [رواه الترمذي]" },
"العقيقة": { حكم: "سنة مؤكدة", دليل: "قال النبي ﷺ: «كل غلام مرتهن بعقيقته، تذبح عنه يوم سابعه» [رواه أبو داود]" },
"التيمم": { حكم: "واجب عند فقد الماء", دليل: "قال تعالى: {فَلَمْ تَجِدُوا مَاءً فَتَيَمَّمُوا صَعِيدًا طَيِّبًا} [المائدة: 6]" },
"الحياء": { حكم: "مستحب", دليل: "قال النبي ﷺ: «الحياء لا يأتي إلا بخير» [رواه البخاري]" },
"الأمر بالمعروف": { حكم: "واجب", دليل: "قال تعالى: {وَلْتَكُن مِّنكُمْ أُمَّةٌ يَدْعُونَ إِلَى الْخَيْرِ...} [آل عمران: 104]" },
"النهي عن المنكر": { حكم: "واجب", دليل: "قال النبي ﷺ: «من رأى منكم منكرًا فليغيره بيده...» [رواه مسلم]" },
"الوفاء بالنذر": { حكم: "واجب", دليل: "قال تعالى: {وَلْيُوفُوا نُذُورَهُمْ} [الحج: 29]" },
"الإفطار في رمضان بغير عذر": { حكم: "حرام", دليل: "قال النبي ﷺ: «من أفطر يومًا من رمضان من غير رخصة ولا مرض لم يقضه صوم الدهر»" },
"إطعام المسكين": { حكم: "مستحب (وقد يجب في الكفارة)", دليل: "قال تعالى: {أَوْ إِطْعَامٌ فِي يَوْمٍ ذِي مَسْغَبَةٍ، يَتِيمًا ذَا مَقْرَبَةٍ}" },
"المسح على الخفين": { حكم: "جائز", دليل: "قال النبي ﷺ: «رأيت رسول الله ﷺ يمسح على الخفين» [رواه البخاري]" },
"التوبة": { حكم: "واجب", دليل: "قال تعالى: {وَتُوبُوا إِلَى اللَّهِ جَمِيعًا أَيُّهَا الْمُؤْمِنُونَ} [النور: 31]" },
"الاستغفار": { حكم: "مستحب دائمًا", دليل: "قال تعالى: {وَاسْتَغْفِرُوا اللَّهَ إِنَّ اللَّهَ غَفُورٌ رَّحِيمٌ} [المزمل: 20]" },
"الإعتكاف": { حكم: "سنة", دليل: "كان النبي ﷺ يعتكف العشر الأواخر من رمضان" },
"صلاة الضحى": { حكم: "سنة", دليل: "قال النبي ﷺ: «يصبح على كل سلامى من أحدكم صدقة... ويجزئ عن ذلك ركعتان يركعهما من الضحى»" },
"إكرام الضيف": { حكم: "واجب يوم وليلة وسنة ثلاثة أيام", دليل: "قال النبي ﷺ: «من كان يؤمن بالله واليوم الآخر فليكرم ضيفه»" },
"الاستئذان": { حكم: "واجب", دليل: "قال تعالى: {يَا أَيُّهَا الَّذِينَ آمَنُوا لَا تَدْخُلُوا بُيُوتًا غَيْرَ بُيُوتِكُمْ...} [النور: 27]" },
"النوم على طهارة": { حكم: "سنة", دليل: "قال النبي ﷺ: «إذا أتيت مضجعك فتوضأ وضوءك للصلاة» [رواه البخاري]" },
"الدعاء": { حكم: "مستحب دائمًا", دليل: "قال تعالى: {ادْعُونِي أَسْتَجِبْ لَكُمْ} [غافر: 60]" },
"زيارة المريض": { حكم: "سنة", دليل: "قال النبي ﷺ: «عائد المريض في مخرفة الجنة حتى يرجع» [رواه مسلم]" },
"اتباع الجنائز": { حكم: "سنة", دليل: "قال النبي ﷺ: «من تبع جنازة حتى يصلى عليها فله قيراط...» [رواه البخاري]" },
"التكبير في العيدين": { حكم: "سنة", دليل: "قال تعالى: {وَلِتُكَبِّرُوا اللَّهَ عَلَى مَا هَدَاكُمْ} [البقرة: 185]" },
"إماطة الأذى عن الطريق": { حكم: "مستحب", دليل: "قال النبي ﷺ: «إماطة الأذى عن الطريق صدقة»" },
"الصدق": { حكم: "واجب", دليل: "قال تعالى: {يَا أَيُّهَا الَّذِينَ آمَنُوا اتَّقُوا اللَّهَ وَكُونُوا مَعَ الصَّادِقِينَ} [التوبة: 119]" },
"التواضع": { حكم: "مستحب", دليل: "قال النبي ﷺ: «وما تواضع أحد لله إلا رفعه» [رواه مسلم]" },
"التكبر": { حكم: "حرام", دليل: "قال النبي ﷺ: «لا يدخل الجنة من كان في قلبه مثقال ذرة من كبر»" },
"الشرك بالله": { حكم: "أكبر الكبائر وحرام", دليل: "قال تعالى: {إِنَّ اللَّهَ لَا يَغْفِرُ أَن يُشْرَكَ بِهِ} [النساء: 48]" },
"الحلف بغير الله": { حكم: "حرام", دليل: "قال النبي ﷺ: «من حلف بغير الله فقد أشرك» [رواه أبو داود]" },
"التبرج": { حكم: "حرام", دليل: "قال تعالى: {وَلَا تَبَرَّجْنَ تَبَرُّجَ الْجَاهِلِيَّةِ الْأُولَى} [الأحزاب: 33]" },
"الموسيقى والمعازف": { حكم: "مرتبط بالمختار الفقهي", دليل: "وردت أحاديث وآراء فقهاء اختلفت في التحريم، ولأنك طلبت دليل واحد فاذكرنا سياق السؤال" },
"الرباط في سبيل الله": { حكم: "سنة مؤكدة", دليل: "قال النبي ﷺ: «رباط يوم في سبيل الله خير من الدنيا وما عليها»" },
"الإيثار": { حكم: "مستحب", دليل: "قال تعالى: {وَيُؤْثِرُونَ عَلَى أَنفُسِهِمْ وَلَوْ كَانَ بِهِمْ خَصَاصَةٌ} [الحشر: 9]" },
"إعانة المحتاج": { حكم: "واجب كفاية", دليل: "قال النبي ﷺ: «من كان في حاجة أخيه كان الله في حاجته»" },
"حسن الظن": { حكم: "مستحب", دليل: "قال النبي ﷺ: «إياكم والظن فإن الظن أكذب الحديث»" },
"سوء الظن": { حكم: "حرام", دليل: "قال تعالى: {اجْتَنِبُوا كَثِيرًا مِّنَ الظَّنِّ} [الحجرات: 12]" },
"الطيرة والتشاؤم": { حكم: "حرام", دليل: "قال النبي ﷺ: «الطيرة شرك»" },
"التوكل على الله": { حكم: "واجب", دليل: "قال تعالى: {وَعَلَى اللَّهِ فَتَوَكَّلُوا إِن كُنتُم مُّؤْمِنِينَ} [المائدة: 23]" },
"الرقية الشرعية": { حكم: "جائزة", دليل: "قال النبي ﷺ: «لا بأس بالرقى ما لم تكن شركًا»" },
"إحياء سنة مهجورة": { حكم: "مستحب", دليل: "قال النبي ﷺ: «من أحيا سنة من سنتي قد أميتت بعدي فله أجرها...»" },
"صلاة الفجر": { حكم: "واجب", دليل: "قال تعالى: {فَاصْبَحُوا عَلَىٰ شُهُودِهِ} [النبأ: 9-11]" },
"صلاة الظهر": { حكم: "واجب", دليل: "قال تعالى: {حَتَّىٰ بَاضَ الْفَجْرُ} دلالة على مواقيت الصلوات" },
"صلاة العصر": { حكم: "واجب", دليل: "أمر بالصلاة على مواقيتها في عدة آيات والسنة" },
"صلاة المغرب": { حكم: "واجب", دليل: "ثبتت في القرآن والسنة مواقيت المغرب" },
"تلاوة القرآن": { حكم: "واجب فضلاً", دليل: "قال تعالى: {وَرَتِّلِ الْقُرْآنَ تَرْتِيلًا} [المزمل: 4]" },
"الزكاة المفروضة على المال": { حكم: "واجب", دليل: "قال تعالى: {خُذْ مِنْ أَمْوَالِهِم صَدَقَةً} [التوبة: 103]" },
"القرض الحسن": { حكم: "مستحب/مباح", دليل: "حث الإسلام على الإحسان والإعارة بلا ربا" },
"البيع بالثمن المعلوم": { حكم: "واجب تجنبه للغرر", دليل: "النهي عن الغرر والشك في المعاملات في السنة" },
"الشراكة": { حكم: "مباح مع شروط", دليل: "أحكام المعاملات في القرآن والسنة عامة للمعاملات المشروعة" },
"الربا المعاملاتي": { حكم: "حرام", دليل: "قال تعالى: {وَأَحَلَّ اللَّهُ الْبَيْعَ وَحَرَّمَ الرِّبَا} [البقرة: 275]" },
"الوصية": { حكم: "واجب بنسبة معينة", دليل: "قال تعالى: {يُوصِيكُمُ اللَّهُ فِي أَوْلَادِكُمْ} [النساء: 11]" },
"الوصية للديون": { حكم: "مستحب", دليل: "السنة تأمر بالترتيب للديون والوصية" },
"النكاح (الزواج)": { حكم: "مشروع ومستحب", دليل: "قال تعالى: {وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُم مِّنْ أَنفُسِكُمْ أَزْوَاجًا} [الروم: 21]" },
"الولي في النكاح": { حكم: "لازم في بعض الحالات", دليل: "أوضحته السنة والأدلة الفقهية" },
"المهر": { حكم: "واجب على الزوج", دليل: "قال تعالى: {وَآتَيْتُمُوهُنَّ أُجُورَهُنَّ} [النساء: 4]" },
"الطلاق": { حكم: "جائز لكن مكروه إن لم تكن ضرورة", دليل: "قال تعالى: {فَإِن طَلَّقَهَا فَلَا تَأْخُذُوا مِنْهُ شَيْئًا...} [البقرة: 229]" },
"عدة المرأة المطلقة": { حكم: "واجب", دليل: "قال تعالى: {وَاللَّائِي يَئِسْنَ مِنَ الْمَحِيضِ} [الطلاق: 4]" },
"النفقة على الزوجة": { حكم: "واجب على الزوج", دليل: "قال تعالى: {وَعَلَى الْمَوْلُودِ لَهُ رِزْقُهُنَّ وَكِسْوَتُهُنَّ} دلالة على النفقة" },
"حد الزنا (للزاني)": { حكم: "واجب تطبيقه بشروط", دليل: "آيات الحدود في القرآن وذكرها في السنة" },
"حد السرقة": { حكم: "واجب بشروط الشروط", دليل: "قال تعالى: {وَالسَّارِقُ وَالسَّارِقَةُ فَاقْطَعُوا أَيْدِيَهُمَا} [المائدة: 38]" },
"الحد على القذف": { حكم: "واجب عند الشروط", دليل: "قال تعالى: {وَالَّذِينَ يَرْمُونَ الْمُحْصَنَاتِ...} [النور: 4]" },
"قواعد الإثبات": { حكم: "واجب اتباعها", دليل: "الكتاب والسنة يذكران شروط الشهادة والحق" },
"الصدق في المعاملات": { حكم: "واجب", دليل: "قال النبي ﷺ: «عليكم بالصدق»" },
"حفظ الأمانة في الوظيفة": { حكم: "واجب", دليل: "قال تعالى: {إِنَّ اللَّهَ يَأْمُرُكُمْ أَنْ تُؤدُّوا الأَمَانَاتِ} [النساء: 58]" },
"عدم الإساءة للآخرين لفظيًا": { حكم: "واجب", دليل: "قال تعالى: {وَقُولُوا لِلنَّاسِ حُسْنًا} [البقرة: 83]" },
"صيانة العرض": { حكم: "واجب", دليل: "آيات الشرف والعفاف والأحاديث تحث على ذلك" },
"الآذان": { حكم: "سنة مؤكدة", دليل: "قال النبي ﷺ: «حين تؤذن فحيث سمعت الأذان فأذن»" },
"الاستجابة للدعاء": { حكم: "واجب التوجه به", دليل: "قال تعالى: {ادْعُونِي أَسْتَجِبْ لَكُمْ} [غافر: 60]" },
"الذكر بعد الصلاة": { حكم: "سنة", دليل: "السنة النبوية في الأذكار عقب الصلوات" },
"التشهد": { حكم: "واجب في الصلاة", دليل: "السنة والنصوص على التشهد في الصلاة" },
"الضمان (الكفالة)": { حكم: "جائز بشروط", دليل: "السنة والفقه تناولتا أحكام الكفالة والضمان" },
"الاستثمار الحلال": { حكم: "مباح مع شروط", دليل: "تحريم الربا وتحريم الحرام يجعل الاستثمار الحلال مشروعًا" },
"المضاهاة في البيع": { حكم: "مستحب تجنبها", دليل: "النهي عن الغش والظلم في البيع في القرآن والسنة" },
"غسل الميت": { حكم: "واجب على المسلمين بالنسبة لغير الحرم", دليل: "السنة في غسل وتكفين الميت" },
"التكفين": { حكم: "واجب للميت المسلم", دليل: "السنة العملية المعروفة بغسل وكفن الميت" },
"صلاة الجنازة": { حكم: "واجبة على الجماعة عند وجودها", دليل: "السنة في إقامة صلاة الجنازة" },
"الاستنجاء بعد النجاسة": { حكم: "واجب", دليل: "آيات الطهارة والسنة" },
"صيام يوم الاثنين والخميس": { حكم: "مستحب", دليل: "قال النبي ﷺ: «أحب الأعمال إلى الله أدومها وإن قل» ودعوة لصوم الاثنين والخميس" },
"صيام أيام البيض": { حكم: "مستحب", دليل: "السنة في صيام أيام البيض (13،14،15 من الشهر القمري)" },
"الإفطار للمريض والمسافر": { حكم: "جائز ومباح", دليل: "قال تعالى: {فَمَن كَانَ مِنكُم مَرِيضًا أَوْ عَلَىٰ سَفَرٍ فَعِدَّةٌ مِّنْ أَيَّامٍ أُخَرَ} [البقرة: 184]" },
"الولاية على القاصر": { حكم: "واجب تطبيقها", دليل: "القرآن والسنة أوجبا حفظ الحقوق والوصاية" },
"الوصاية على المال": { حكم: "واجبة للحفاظ على مصلحة اليتيم", دليل: "قال تعالى: {وَآتوْا الْيَتَامَى أَمْوَالَهُمْ} [النساء: 2]" },
"إكرام الكبير في المجتمع": { حكم: "واجب", دليل: "السنة تحض على البر والإحسان إلى الكبير" },
"آداب الطعام (الذكر قبل الأكل)": { حكم: "سنة", دليل: "قال النبي ﷺ: «إذا أكل أحدكم فليذكر اسم الله تعالى»" },
"أكل بيمينه": { حكم: "سنة", دليل: "أوامر النبي ﷺ في آداب الأكل" },
"الأكل مما بين يديك": { حکم: "سنة", دليل: "السنة في آداب الضيافة والأكل مع الناس" },
"التبرع بالدم": { حكم: "جائز ومندوب إذا لم يضر بالمتبرع", دليل: "القاعدة الشرعية: لا ضرر ولا ضرار" },
"الزينة المشروعة": { حکم: "مباح ضمن الحلال", دليل: "الشرع يسمح بالزينة المشروعّة مع الضوابط" },
"العمل باليد": { حکم: "مستحب وكفاح مشروع", دليل: "العمل عبادة في ضوء الأدلة العامة عن الكسب الحلال" },
"حق الحياة": { حكم: "مقدس وواجب الحفاظ عليه", دليل: "قال تعالى: {وَمَنْ أَحْيَاهَا فَكَأَنَّمَا أَحْيَا النَّاسَ جَمِيعًا} [المائدة: 32]" },
"حق العرض والكرامة": { حكم: "واجب صيانتها", دليل: "القرآن والسنة يدافعان عن الكرامة الإنسانية" },
"الحق في المال": { حکم: "واجب الحفاظ عليه وعدم التعدي", دليل: "قال تعالى: {وَلَا تَأْكُلُوا أَمْوَالَكُم بَيْنَكُم بِالْبَاطِلِ} [البقرة: 188]" },
"التيمم": { حكم: "جائز عند عدم وجود الماء", دليل: "قال تعالى: {فَلَمْ تَجِدُوا مَاءً فَتَيَمَّمُوا صَعِيدًا طَيِّبًا} [المائدة: 6]" },
"الزكاة": { حكم: "واجب", دليل: "قال تعالى: {وَآتُوا الزَّكَاةَ} ودُعيت الأحكام في سور متعددة." },
"الزكاة على الذهب": { حكم: "واجب عند النصاب", دليل: "تُخرَج زكاة الذهب إذا بلغ النصاب وحال عليه الحول." },
"الربا": { حكم: "حرام", دليل: "قال تعالى: {يَا أَيُّهَا الَّذِينَ آمَنُوا لَا تَأْكُلُوا الرِّبَا...} [آل عمران/البقرة]" },
"البيع والشراء": { حكم: "مباح", دليل: "قال تعالى: {أُحِلَّت لَكُم بَهِيمَةُ الْأَنْعَامِ... وَأَحَلَّ اللَّهُ الْبَيْعَ}." },
"الغش في الميزان": { حكم: "حرام", دليل: "قال تعالى: {وَيْلٌ لِّلْمُطَفِّفِينَ} [المطففين: 1]" },
"السرقة": { حكم: "حرام", دليل: "قال تعالى: {وَالسَّارِقُ وَالسَّارِقَةُ فَاقْطَعُوا أَيْدِيَهُمَا} [المائدة: 38]" },
"القتل العمد": { حكم: "حرام", دليل: "قال تعالى: {وَمَن يَقْتُلْ مُؤْمِنًا مُتَعَمِّدًا فَجَزَاؤُهُ جَهَنَّمُ} [النساء: 93]" },
"القتل الخطأ": { حكم: "حرام ويُترتب عليه تعويض", دليل: "قال تعالى: {وَمَا كَانَ لِمُؤْمِنٍ... إِلَّا خَطَأً} [النساء: 92]" },
"الوصية": { حكم: "واجب جزئياً (لوجود نصيب)", دليل: "قال تعالى: {يُوصِيكُمُ اللَّهُ فِي أَوْلَادِكُمْ} [النساء: 11]" },
"الميراث": { حكم: "واجب تطبيقه", دليل: "أحكام الميراث موضوعة في القرآن في سورة النساء." },
"النكاح (الزواج)": { حكم: "مشروع ومستحب", دليل: "قال تعالى: {وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُم مِّنْ أَنفُسِكُمْ أَزْوَاجًا} [الروم: 21]" },
"المهر": { حكم: "واجب على الزوج", دليل: "قال تعالى: {وَآتَيْتُمُوهُنَّ أُجُورَهُنَّ} [النساء: 4]" },
"الطلاق": { حكم: "مباح لكن مبغوض", دليل: "قال تعالى: {فَإِن طَلَّقَهَا فَلَا تَأْخُذُوا مِنْهُ شَيْئًا...} [البقرة: 229]" },
"عدة المرأة المطلقة": { حكم: "واجب", دليل: "قال تعالى: {وَاللَّائِي يَئِسْنَ مِنَ الْمَحِيضِ} [الطلاق: 4]" },
"النفقة": { حكم: "واجب", دليل: "قال تعالى: {عَلَى الْمَوْلُودِ لَهُ رِزْقُهُنَّ} ودلائل السنة." },
"صلة الرحم": { حكم: "واجب", دليل: "قال النبي ﷺ: «من أحب أن يُبسط له في رزقه... فليصل رحمه»" },
"الإحسان إلى الجار": { حكم: "واجب", دليل: "قال النبي ﷺ: «ما زال جبريل يوصيني بالجار...»" },
"الطهارة": { حكم: "واجب", دليل: "قال النبي ﷺ: «الطهور شطر الإيمان»" },
"الاستغفار": { حكم: "مستحب", دليل: "قال تعالى: {وَاسْتَغْفِرُوا اللَّهَ}." },
"التوبة": { حكم: "واجب", دليل: "قال تعالى: {تُوبُوا إِلَى اللَّهِ جَمِيعًا}." },
"الآذان": { حكم: "سنة مؤكدة", دليل: "السنة في الأذان والإقامة مثبتة بالمتواتر." },
"صلاة التراويح": { حكم: "سنة", دليل: "ثُبِتت صلاة التراويح في السنة النبوية." },
"صلاة الوتر": { حكم: "سنة مؤكدة", دليل: "قال النبي ﷺ: «أوتروا يا أهل القرآن...»" },
"صيام رمضان": { حكم: "واجب", دليل: "قال تعالى: {كُتِبَ عَلَيْكُمُ الصِّيَامُ}." },
"صيام عاشوراء": { حكم: "سنة مؤكدة", دليل: "قال النبي ﷺ: «يكفر السنة الماضية»" },
"صيام يوم عرفة": { حكم: "سنة مؤكدة", دليل: "قال النبي ﷺ: «يكفر السنة الماضية والباقية»" },
"الإفطار للحائض": { حكم: "باحث", دليل: "المرأة الحائض تُفطر وتقضي، هذا معروف من النصوص." },
"النكاح المؤقت (الزور)": { حكم: "محرّم (خلافية حسب التعريف)", دليل: "العديد من الفقهاء يحرمون عقوداً تشبه المتعة إذا كانت مخالفة للشرع." },
"الحدود": { حكم: "واجبة بشروط شرعية", دليل: "تفصلها الشريعة وفق شروط وإثبات." },
"القذف": { حكم: "حرام ويترتب عليه حد", دليل: "قال تعالى: {وَالَّذِينَ يَرْمُونَ الْمُحْصَنَاتِ...} [النور: 4]" },
"الشهادة الزور": { حكم: "حرام ومآلها شديد", دليل: "النهي القاطع عن شهادة الباطل في الكتاب والسنة." },
"اليمين الكاذبة": { حكم: "حرام", دليل: "التحذير من الحلف الباطل في الكتاب والسنة." },
"الرشوة": { حكم: "حرام", دليل: "قال النبي ﷺ: «لعن الله الراشي والمرتشي»" },
"البيع بالغش": { حكم: "حرام", دليل: "النهي عن الخداع في البيع في الحديث والقرآن." },
"قرض الحسن": { حكم: "مستحب", دليل: "الحث على الإعارة والإحسان دون ربا." },
"التجارة": { حكم: "مباح بشرط الحلال", دليل: "البيع مشروع بشرط اجتناب الحرام." },
"المسواك": { حكم: "مستحب", دليل: "أمر به النبي ﷺ في سنته" },
"النية": { حكم: "أساسية (تقديرية)", دليل: "قال النبي ﷺ: «إنما الأعمال بالنيات»" },
"التكافل الاجتماعي": { حكم: "واجب كفائي", دليل: "الدعوة للصدقة والإعانة في الكتاب والسنة" },
"الصدقة": { حكم: "مستحب (واجبة في الزكاة)", دليل: "حث القرآن والسنة على الإنفاق" },
"حفظ الأمانة": { حكم: "واجب", دليل: "قال تعالى: {إِنَّ اللَّهَ يَأْمُرُكُمْ أَنْ تُؤدُّوا الأَمَانَاتِ} [النساء: 58]" },
"آداب الطعام": { حكم: "سنة", دليل: "ذكر النبي ﷺ آداباً مثل ذكر الله والأكل باليمين" },
"التحريم بغير دليل": { حكم: "حرام", دليل: "قال تعالى: {وَلَا تَقُولُوا لِمَا تَصِفُ أَلْسِنَتُكُمُ الْكَذِبَ...} [النحل:116]" },
"التحريم الإضافي (بدعة)": { حكم: "مردود", دليل: "تحريمه إن أدى لشروط الشرك أو المنع مما أحل الله" },
"المسلم والمسيء": { حكم: "الرد بالقدوة الحسنة", دليل: "أخلاق النبي ﷺ في التعامل مع الناس" },
"الإسلام في التعامل": { حكم: "واجب", دليل: "أدلة عامة في الكتاب والسنة على حسن الخلق" },
"الرهق (الكفالة)": { حكم: "جائز بشروط", دليل: "الفقه تناول أحكام الكفالة والضمان" },
"التبرج": { حكم: "حرام", دليل: "قال تعالى: {وَلَا تَبَرَّجْنَ} [الأحزاب:33]" },
"الحجاب": { حكم: "واجب على المرأة في حدود الشرع", دليل: "آيات مباشرة وأدلة النقل" },
"اللباس في الإسلام": { حكم: "مباح مع ضوابط الحشمة", دليل: "أدلة عامة عن الحشمة والستر" },
"الموسيقى": { حكم: "خلاف بين الفقهاء", دليل: "نبهت نصوص وأحاديث ونصائح فقهية مختلفة؛ يتطلب عرض أقوال الفقهاء" },
"العمل بالكسب الحلال": { حكم: "واجب", دليل: "حث القرآني والسني على الكسب الحلال" },
"أكل الميتة": { حكم: "حرام (عمومًا)", دليل: "صلاحية الأكل مبينة في الكتاب والسنة" },
"أكل لحم الخنزير": { حكم: "حرام", دليل: "قال تعالى: {حُرِّمَتْ عَلَيْكُمُ الْمَيْتَةُ وَالْخَبِيثَةُ...} [المائدة]" },
"الربا المصرفي الحديث": { حكم: "حرام في الأصل", دليل: "عموم تحريم الربا في القرآن ومناقشات فقهية عن صيغ العصر" },
"الإرث بالتعيين": { حكم: "واجب", دليل: "تفصيل الميراث في سورة النساء بالنصوص" },
"الرضاع (أثره في النسب)": { حكم: "له أثر شرعي", دليل: "الرضاع يقطع أحكام النسب بين الرضيع وأهل الرضاعة" },
"حكم الوصية لأهل العلم": { حكم: "مباح ومرغوب", دليل: "السنة تحث على التصدق والإحسان" },
"الأيمان والعهود": { حكم: "واجب الوفاء", دليل: "النهي عن نقض العهود" },
"دور القضاء في الشريعة": { حكم: "واجب التطبيق", دليل: "الشرع نظم أحكام القضاء والحقوق" },
"حكم الطواف بالصلاة": { حكم: "واجب حقوقي (مواقيت)", دليل: "آداب الحج والعمرة في الكتاب والسنة" }
};

/* ===================== إعدادات داخلية ===================== */
let keysCache = Object.keys(data);
let ttsEnabled = false;

/* دوال مساعدة */
function normalize(text) {
    if (!text) return '';
    text = text.toString().trim().toLowerCase();
    text = text.replace(/[^\u0621-\u064A0-9a-z\s]/g, '');
    text = text.replace(/[آأإ]/g, 'ا');
    text = text.replace(/ة/g, 'ه');
    text = text.replace(/ى/g, 'ي');
    text = text.replace(/\s+/g, ' ');
    return text;
}

function escapeHtml(text) {
    if (!text) return '';
    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '<br>');
}

function stripTags(str) { return (str || '').replace(/<\/?[^>]+(>|$)/g, ""); }

/* عرض رسالة مؤقتة */
function showToast(msg, duration = 2200) {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), duration);
}

/* اقتراح مواضيع ذات صلة */
function getRelatedSuggestions(key) {
    const related = [];
    const words = normalize(key).split(' ').filter(Boolean);
    for (const k of keysCache) {
        if (k === key) continue;
        for (const w of words) {
            if (w.length > 2 && normalize(k).includes(w) && !related.includes(k)) {
                related.push(k);
            }
        }
        if (related.length >= 4) break;
    }
    return related;
}

/* عرض نتيجة */
const questionInput = document.getElementById('question');
const askBtn = document.getElementById('askBtn');
const clearBtn = document.getElementById('clearBtn');
const suggestionsDiv = document.getElementById('suggestions');
const resultDiv = document.getElementById('result');
const showAllBtn = document.getElementById('showAll');
const exportBtn = document.getElementById('exportBtn');

function renderResult(key) {
    if (!data[key]) return;
    const item = data[key];
    resultDiv.innerHTML = '';
    const wrapper = document.createElement('div');
    wrapper.classList.add('animate__animated', 'animate__fadeIn');

    const hukmBox = document.createElement('div');
    hukmBox.className = 'hukm';
    const left = document.createElement('div');
    const title = document.createElement('div');
    title.className = 'title';
    title.textContent = key;
    const hukmType = document.createElement('div');
    hukmType.className = 'hukm-type';
    hukmType.textContent = item.حكم;
    left.appendChild(title);
    left.appendChild(hukmType);
    hukmBox.appendChild(left);

    const proof = document.createElement('div');
    proof.className = 'proof';
    proof.innerHTML = `<strong>الدليل:</strong><br>${escapeHtml(item.دليل)}`;

    const controls = document.createElement('div');
    controls.className = 'controls';
    const copyBtn = document.createElement('button');
    copyBtn.className = 'copy-btn';
    copyBtn.innerHTML = '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg> نسخ الحكم والدليل';
    copyBtn.addEventListener('click', () => copyResultText(key));
    const ttsBtn = document.createElement('button'); 
    ttsBtn.className = 'copy-btn';
    ttsBtn.innerHTML = '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.8-1-3.3-2.5-4v8c1.5-.7 2.5-2.2 2.5-4zM14 3.2v2.1c2.9.9 5 3.5 5 6.7s-2.1 5.8-5 6.7v2.1c4-.9 7-4.5 7-8.8s-3-7.9-7-8.8z"/></svg> تشغيل صوتي';
    ttsBtn.addEventListener('click', () => speakText(key));
    controls.appendChild(copyBtn);
    controls.appendChild(ttsBtn);

    wrapper.appendChild(hukmBox);
    wrapper.appendChild(proof);
    wrapper.appendChild(controls);

    const rel = getRelatedSuggestions(key);
    if (rel.length) {
        const relBox = document.createElement('div');
        relBox.style.marginTop = '10px';
        relBox.className = 'mini';
        relBox.textContent = 'مواضيع ذات صلة: ';
        rel.forEach(r => {
            const b = document.createElement('button');
            b.className = 'suggestion';
            b.style.padding = '6px 10px';
            b.style.fontSize = '13px';
            b.textContent = r;
            b.addEventListener('click', () => {
                questionInput.value = r;
                suggestionsDiv.innerHTML = '';
                renderResult(r);
            });
            relBox.appendChild(b);
        });
        wrapper.appendChild(relBox);
    }

    resultDiv.appendChild(wrapper);
}

/* نسخ النص */
function copyResultText(key) {
    const item = data[key];
    const text = `المسألة: ${key}\nالحكم: ${item.حكم}\nالدليل: ${stripTags(item.دليل)}`;
    navigator.clipboard.writeText(text).then(() => showToast('تم نسخ النص إلى الحافظة')).catch(() => showToast('فشل النسخ'));
}

/* تشغيل الصوت */
function speakText(key) {
    if (!('speechSynthesis' in window)) {
        showToast('متصفحك لا يدعم تشغيل الصوت');
        return;
    }
    const item = data[key];
    const text = `الحكم في ${key}: ${item.حكم}. الدليل: ${stripTags(item.دليل)}`;
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = 'ar-SA';
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(utter);
}

/* بحث ذكي */
function smartSearch(query) {
    if (!query) return null;
    const q = normalize(query);
    for (const k of keysCache) {
        const nk = normalize(k);
        if (nk === q || nk.startsWith(q) || nk.includes(q)) return k;
    }
    // بحث في نوع الحكم
    for (const k of keysCache) {
        const hk = normalize(data[k].حكم || '');
        if (hk.includes(q)) return k;
    }
    // كلمات مفردة
    const tokens = q.split(' ').filter(Boolean);
    for (const k of keysCache) {
        const nk = normalize(k);
        for (const t of tokens) if (t.length > 2 && nk.includes(t)) return k;
    }
    return null;
}

/* اقتراحات اثناء الكتابة */
questionInput.addEventListener('input', function () {
    const v = this.value.trim();
    suggestionsDiv.innerHTML = '';
    if (v.length === 0) {
        resultDiv.innerHTML = '<div class="welcome-message"><div class="welcome-icon"><svg viewBox="0 0 24 24" width="40" height="40"><path fill="currentColor" d="M12 3L1 12h3v8h6v-6h2v6h6v-8h3L12 3zm0 2.8L18 10v8h-2v-6H8v6H6v-8l6-4.2z"/></svg></div><div class="mini">اكتب سؤالاً واضغط "اعرف الحكم" أو اختر اقتراحاً لعرض الحكم والدليل.</div></div>';
        return;
    }
    const q = normalize(v);
    let count = 0;
    for (const k of keysCache) {
        if (normalize(k).startsWith(q) || normalize(k).includes(q)) {
            const d = document.createElement('div');
            d.className = 'suggestion';
            d.textContent = k;
            d.addEventListener('click', () => {
                questionInput.value = k;
                suggestionsDiv.innerHTML = '';
                renderResult(k);
            });
            suggestionsDiv.appendChild(d);
            if (++count >= 8) break;
        }
    }
});

/* زر البحث */
function handleAsk() {
    const q = questionInput.value.trim();
    if (!q) {
        resultDiv.innerHTML = '<div class="mini">اكتب سؤالاً واضغط "اعرف الحكم".</div>'; 
        return;
    }
    const matched = smartSearch(q);
    if (matched) {
        renderResult(matched);
        return;
    }
    // محاولة بكلمات
    const words = normalize(q).split(' ').filter(Boolean);
    for (const w of words) {
        if (w.length > 2) {
            const m = smartSearch(w);
            if (m) {
                renderResult(m);
                return;
            }
        }
    }
    // لا يوجد
    const suggestions = keysCache.slice(0, 8).map(k => `• ${k} (${data[k].حكم})`).join('\n');
    resultDiv.innerHTML = `<div class="mini">لم أجد تطابقًا واضحًا. جرّب كلمة مفتاحية أخرى أو اختر من الاقتراحات أدناه.<br><pre style="color:var(--muted);white-space:pre-wrap">${suggestions}</pre></div>`;
}

/* أحداث */
askBtn.addEventListener('click', handleAsk);
questionInput.addEventListener('keypress', e => {
    if (e.key === 'Enter') {
        e.preventDefault();
        handleAsk();
    } 
});
clearBtn.addEventListener('click', () => {
    questionInput.value = '';
    suggestionsDiv.innerHTML = '';
    resultDiv.innerHTML = '<div class="welcome-message"><div class="welcome-icon"><svg viewBox="0 0 24 24" width="40" height="40"><path fill="currentColor" d="M12 3L1 12h3v8h6v-6h2v6h6v-8h3L12 3zm0 2.8L18 10v8h-2v-6H8v6H6v-8l6-4.2z"/></svg></div><div class="mini">اكتب سؤالاً واضغط "اعرف الحكم" أو اختر اقتراحاً.</div></div>'; 
    questionInput.focus();
});

/* عرض كل الأحكام */
showAllBtn.addEventListener('click', () => {
    const list = keysCache.map(k => {
        const item = data[k];
        return `<div style="margin-bottom:12px;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02)" class="animate__animated animate__fadeIn">
            <strong>${k}</strong>
            <div class="mini" style="margin-top:6px">${item.حكم}</div>
            <div class="proof" style="margin-top:8px;color:var(--muted)">${escapeHtml(item.دليل)}</div>
        </div>`;
    }).join('');
    resultDiv.innerHTML = `<div style="max-height:520px;overflow:auto;padding-right:6px">${list}</div>`;
});

/* حفظ JSON */
exportBtn.addEventListener('click', () => {
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'fiqh_data.json';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
    showToast('تم تصدير البيانات بنجاح');
});

/* ===================== شات محلي ذكي ===================== */
const chatHistory = document.getElementById('chatHistory');
const chatInput = document.getElementById('chatInput');
const sendChatBtn = document.getElementById('sendChat');
const clearChatBtn = document.getElementById('clearChat');
const ttsToggleBtn = document.getElementById('ttsToggle');

function appendChat(text, who = 'bot') {
    const div = document.createElement('div');
    div.className = 'bubble ' + (who === 'user' ? 'user-bubble' : 'bot-bubble');
    if (who === 'user') div.textContent = text;
    else div.innerHTML = text;
    chatHistory.appendChild(div);
    chatHistory.scrollTop = chatHistory.scrollHeight;
}

function appendTyping() {
    const d = document.createElement('div');
    d.id = '__typing';
    d.className = 'bot-typing';
    chatHistory.appendChild(d);
    chatHistory.scrollTop = chatHistory.scrollHeight;
}

function removeTyping() {
    const el = document.getElementById('__typing'); 
    if (el) el.remove();
}

function scoreMatch(q, k) {
    if (q === k) return 1.0;
    if (k.startsWith(q)) return 0.9;
    if (k.includes(q)) return 0.7;
    const qWords = q.split(' ');
    const kWords = k.split(' ');
    const common = qWords.filter(w => kWords.includes(w)).length;
    if (common > 0) return Math.min(0.6, 0.3 + (common / qWords.length) * 0.4);
    return 0;
}

function chatReply(userText) {
    const q = normalize(userText);
    let best = { key: null, score: 0 };
    for (const k of keysCache) {
        const s = scoreMatch(q, normalize(k));
        if (s > best.score) { best = { key: k, score: s }; }
    }
    if (best.score >= 0.6) {
        const item = data[best.key];
        let reply = `<strong>${best.key}</strong> — الحكم: ${item.حكم}<br><small style="color:var(--muted)">الدليل:</small> ${escapeHtml(item.دليل)}`;
        const rel = getRelatedSuggestions(best.key);
        if (rel.length) {
            reply += `<br><div class="mini" style="margin-top:8px">مواضيع ذات صلة: `;
            rel.slice(0, 3).forEach(r => {
                reply += `<button class="suggestion" style="margin-left:6px;padding:6px 8px;font-size:13px" onclick="this.parentElement.parentElement.querySelector('input').value='${r}'; this.parentElement.parentElement.querySelector('button').click()">${r}</button>`;
            });
            reply += `</div>`;
        }
        return reply;
    } else {
        const suggestions = keysCache.slice(0, 6).map(k => `• ${k} (${data[k].حكم})`).join('\n');
        return `عذرًا، لم أجد تطابقًا واضحًا. جرّب سؤالًا آخر أو اختر أحد المواضيع الشائعة:\n${suggestions}`;
    }
}

function sendChat() {
    const text = chatInput.value.trim();
    if (!text) return;
    appendChat(text, 'user');
    chatInput.value = '';
    appendTyping();
    setTimeout(() => {
        removeTyping();
        const reply = chatReply(text);
        appendChat(reply, 'bot');
        if (ttsEnabled) {
            const m = smartSearch(text);
            if (m) speakText(m);
        }
    }, 800);
}

sendChatBtn.addEventListener('click', sendChat);
chatInput.addEventListener('keypress', e => {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendChat();
    }
});
clearChatBtn.addEventListener('click', () => {
    chatHistory.innerHTML = '';
    appendChat('مرحبًا 👋<br>اسألني عن أي حكم شرعي وسأحاول الرد مع الدليل.', 'bot');
});

window.addEventListener('DOMContentLoaded', () => {
    appendChat('مرحبًا 👋<br>اسألني عن أي حكم شرعي وسأحاول الرد مع الدليل.', 'bot');
});

ttsToggleBtn.addEventListener('click', () => {
    ttsEnabled = !ttsEnabled;
    ttsToggleBtn.innerHTML = ttsEnabled ?
        '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M19 11h-8v2h8v-2zm-2-6h-6v2h6V5zm4 12h-10v2h10v-2z"/></svg> إيقاف الصوت' : 
        '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.8-1-3.3-2.5-4v8c1.5-.7 2.5-2.2 2.5-4zM14 3.2v2.1c2.9.9 5 3.5 5 6.7s-2.1 5.8-5 6.7v2.1c4-.9 7-4.5 7-8.8s-3-7.9-7-8.8z"/></svg> تشغيل الصوت';
    ttsToggleBtn.setAttribute('aria-pressed', String(ttsEnabled));
    showToast(ttsEnabled ? 'تم تفعيل الصوت' : 'تم إيقاف الصوت');
});

resultDiv.innerHTML = '<div class="welcome-message"><div class="welcome-icon"><svg viewBox="0 0 24 24" width="40" height="40"><path fill="currentColor" d="M12 3L1 12h3v8h6v-6h2v6h6v-8h3L12 3zm0 2.8L18 10v8h-2v-6H8v6H6v-8l6-4.2z"/></svg></div><div class="mini">اكتب مسألة أو كلمة واضغط "اعرف الحكم" — أو اسأل الشات الذكي على اليمين.</div></div>';
chatHistory.scrollTop = chatHistory.scrollHeight;